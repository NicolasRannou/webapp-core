<polymer-element name="home-element" attributes="page nextpage previouspage narrow color">
<template>
  <link rel="stylesheet" href="home.css"> 
  <div id='container1' layout horizontal fit style="background-color: {{ page.style.color }};">


      <core-animated-pages id="pagesTEAT" flex selected="0" transitions="cross-fade-all slide-up slide-down">

        <!-- loading page... -->
        <section vertical layout >

              <div class="loading" fit style="min-height:100%;" flex="" horizontal="" wrap="" center="" around-justified="" layout="" slide-down cross-fade>
                 Loading the page!
              </div>

        </section>

        <!-- actual content -->
        <!-- overflow hidden to hide scroll bar on animation -->
          <section vertical layout style="overflow:hidden">

          <div id="noscroll" fit slide-up cross-fade>
            <div id="container" flex horizontal wrap around-justified layout cross-fade>
            <template repeat="{{row, rowIndex in rows}}">

              <!-- only text -->
              <template if="{{ row.gsx$type.$t === 'text' || row.gsx$type.$t === ''}}">
                <div class="text" row style='background-color: {{ rowIndex | backgroundColor }}; color: {{ rowIndex | color }};'>
                <div class="block grid_outer">
                <div class="padder">
                  <span cross-fade class="{{ row.gsx$class.$t }}">{{ row.gsx$text.$t }}</span>
                  </div>
                </div>
                  
                </div>
              </template>

              <!-- only image: banner we go full width -->
              <template if="{{ row.gsx$type.$t === 'image' }}">
                <div class="image {{ row.gsx$class.$t }}" row style='background-color: {{ rowIndex | backgroundColor }}; color: {{ rowIndex | color }};'>
                  <div class="block grid_outer">
                    <img class='fit-image' src="{{ row.gsx$image.$t }}">
                  </div>
                </div>
              </template>

              <!-- text + image-->
              <template if="{{ row.gsx$type.$t === 'text_image' }}">
                <div class="text_image {{ row.gsx$class.$t }}" row  style='background-color: {{ rowIndex | backgroundColor }}; color: {{ rowIndex | color }};'>
                  <div class="block grid_outer">
                  <div class="padder">
                    <img class='fit-image' src="{{ row.gsx$image.$t }}">
                    <span cross-fade> {{ row.gsx$text.$t }} </span>
                    </div>
                  </div>
                </div>
              </template>

              <!-- image + text -->
              <template if="{{ row.gsx$type.$t === 'image_text' }}">
                <div class="image_text {{ row.gsx$class.$t }}" row  style='background-color: {{ rowIndex | backgroundColor }}; color: {{ rowIndex | color }};'>
                  <div class="block grid_outer">
                  <div class="padder">
                    <img class='fit-image' src="{{ row.gsx$image.$t }}">
                    <span cross-fade> {{ row.gsx$text.$t }} </span>
                    </div>
                  </div>
                </div>
              </template>
            </template>

            <footer-element cross-fade id="footerYo" narrow="{{narrow}}" showprev="false"></footer-element>

            </div>
            </div>
          </section>
      </core-animated-pages>

    <google-sheets key="{{ page.key }}"  rows="{{ rows }}" published></google-sheets>
   
  </div>

</template>
<script>
  Polymer('home-element', {
    nextpageChanged : function(){
      this.$.footerYo.next = this.nextpage;
    },
    rowsChanged: function(){
      if(this.rows && this.rows.length > 1){
        console.log(this.rows);
        // show page / hide loading page
        this.$.pagesTEAT.selected = 1;
      }
    },
    backgroundColor: function(index){
      if( (index%2) === 0){
        return this.page.style.color;
      }
      else{
        return "#f9f9f9";
      }
    },
    color: function(index){
      if( (index%2) === 0){
        return "#f9f9f9";
      }
      else{
        return "#212121";
      }
    },
    narrowChanged : function(){
      // IMPROVE NARROW STYLING IN CSS SOMEHOW (DO NOT RELY ON PX, GET NARROW WITH FROM PARENT?)
    }
  });
</script>
</polymer-element>